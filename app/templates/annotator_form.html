{% extends "base.html" %}

{% block title %}Log Your Work{% endblock %}

{% block nav_log %}bg-brand-50 text-brand-900{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto">
    <!-- Page Header -->
    <div class="text-center mb-10">
        <h1 class="text-page-title text-brand-900 mb-3">Annotator Daily Log</h1>
        <p class="text-brand-500">Log your work for today in a few quick steps.</p>
    </div>

    <!-- Form Card -->
    <form method="POST" action="/log" class="card">
        <!-- Section 1: Identity & Context -->
        <div class="mb-8">
            <h2 class="text-lg font-semibold text-brand-900 mb-5 pb-2 border-b border-brand-100">
                Identity & Context
            </h2>
            
            <div class="space-y-5">
                <!-- Date -->
                <div>
                    <label for="date" class="form-label">Date</label>
                    <input 
                        type="date" 
                        id="date" 
                        name="date" 
                        value="{{ form_data.get('date', today) }}"
                        class="form-input {% if errors.get('date') %}border-red-500 focus:ring-red-500{% endif %}"
                        required
                    >
                    {% if errors.get('date') %}
                    <p class="form-error">{{ errors.date }}</p>
                    {% endif %}
                </div>

                <!-- Annotator Name -->
                <div>
                    <label for="annotator_name" class="form-label">Your Name</label>
                    <input 
                        type="text" 
                        id="annotator_name" 
                        name="annotator_name" 
                        value="{{ form_data.get('annotator_name', '') }}"
                        placeholder="e.g. Jane Doe"
                        class="form-input {% if errors.get('annotator_name') %}border-red-500 focus:ring-red-500{% endif %}"
                        required
                    >
                    {% if errors.get('annotator_name') %}
                    <p class="form-error">{{ errors.annotator_name }}</p>
                    {% endif %}
                </div>

                <!-- Project Name -->
                <div>
                    <label for="project_name" class="form-label">Project Name</label>
                    <input 
                        type="text" 
                        id="project_name" 
                        name="project_name" 
                        value="{{ form_data.get('project_name', '') }}"
                        placeholder="e.g. Retail Boxes Dataset v2"
                        class="form-input {% if errors.get('project_name') %}border-red-500 focus:ring-red-500{% endif %}"
                        required
                    >
                    {% if errors.get('project_name') %}
                    <p class="form-error">{{ errors.project_name }}</p>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Section 2: Work Details -->
        <div class="mb-8">
            <h2 class="text-lg font-semibold text-brand-900 mb-5 pb-2 border-b border-brand-100">
                Work Details
            </h2>
            
            <div class="space-y-5">
                <!-- Task Type -->
                <div>
                    <label for="task_type" class="form-label">Task Type</label>
                    <select 
                        id="task_type" 
                        name="task_type" 
                        class="form-select {% if errors.get('task_type') %}border-red-500 focus:ring-red-500{% endif %}"
                        required
                    >
                        <option value="">Select task type...</option>
                        {% for task in task_types %}
                        <option value="{{ task }}" {% if form_data.get('task_type') == task %}selected{% endif %}>
                            {{ task }}
                        </option>
                        {% endfor %}
                    </select>
                    {% if errors.get('task_type') %}
                    <p class="form-error">{{ errors.task_type }}</p>
                    {% endif %}
                </div>

                <!-- Images Done & Hours Spent (side by side) -->
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="images_done" class="form-label">Images Done</label>
                        <input 
                            type="number" 
                            id="images_done" 
                            name="images_done" 
                            value="{{ form_data.get('images_done', 0) }}"
                            min="0"
                            step="1"
                            class="form-input {% if errors.get('images_done') %}border-red-500 focus:ring-red-500{% endif %}"
                        >
                        {% if errors.get('images_done') %}
                        <p class="form-error">{{ errors.images_done }}</p>
                        {% endif %}
                    </div>
                    <div>
                        <label for="hours_spent" class="form-label">Hours Spent</label>
                        <input 
                            type="number" 
                            id="hours_spent" 
                            name="hours_spent" 
                            value="{{ form_data.get('hours_spent', 0) }}"
                            min="0"
                            step="0.25"
                            class="form-input {% if errors.get('hours_spent') %}border-red-500 focus:ring-red-500{% endif %}"
                        >
                        {% if errors.get('hours_spent') %}
                        <p class="form-error">{{ errors.hours_spent }}</p>
                        {% endif %}
                    </div>
                </div>

                <!-- Status -->
                <div>
                    <label for="status" class="form-label">Status</label>
                    <select 
                        id="status" 
                        name="status" 
                        class="form-select {% if errors.get('status') %}border-red-500 focus:ring-red-500{% endif %}"
                        required
                    >
                        <option value="">Select status...</option>
                        {% for s in status_options %}
                        <option value="{{ s }}" {% if form_data.get('status') == s %}selected{% endif %}>
                            {{ s }}
                        </option>
                        {% endfor %}
                    </select>
                    {% if errors.get('status') %}
                    <p class="form-error">{{ errors.status }}</p>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Section 3: Feedback & Notes -->
        <div class="mb-8">
            <h2 class="text-lg font-semibold text-brand-900 mb-5 pb-2 border-b border-brand-100">
                Feedback & Notes
                <span class="text-sm font-normal text-brand-400 ml-2">(Optional)</span>
            </h2>
            
            <div class="space-y-5">
                <!-- Challenges -->
                <div>
                    <label for="challenges" class="form-label">Challenges / Blockers</label>
                    <textarea 
                        id="challenges" 
                        name="challenges" 
                        rows="3"
                        placeholder="Unclear labels for class X; tool was slow; noisy images..."
                        class="form-textarea"
                    >{{ form_data.get('challenges', '') }}</textarea>
                </div>

                <!-- Suggestions -->
                <div>
                    <label for="suggestions" class="form-label">Suggestions / Ideas</label>
                    <textarea 
                        id="suggestions" 
                        name="suggestions" 
                        rows="3"
                        placeholder="More examples for class X; add keyboard shortcuts; batch similar images..."
                        class="form-textarea"
                    >{{ form_data.get('suggestions', '') }}</textarea>
                </div>

                <!-- Extra Notes -->
                <div>
                    <label for="extra_notes" class="form-label">Extra Notes</label>
                    <textarea 
                        id="extra_notes" 
                        name="extra_notes" 
                        rows="2"
                        placeholder="Any additional information..."
                        class="form-textarea"
                    >{{ form_data.get('extra_notes', '') }}</textarea>
                </div>
            </div>
        </div>

        <!-- Submit Button -->
        <div class="pt-4 border-t border-brand-100">
            <button type="submit" class="btn-primary w-full">
                Submit Work Log
            </button>
        </div>
    </form>
</div>
{% endblock %}

